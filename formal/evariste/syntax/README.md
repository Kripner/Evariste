## Current
We use an LR(0) parser with backtracking. To export a grammar for a dataset, use `export_grammar.py`, then rename the produced `grammar.in`.
Grammars with the right name should be added in `get_backtracking_parser` in `backtracking.py`.

The input grammar files are hashed and when loading a pickle, we make sure the hash matches. If a `grammar.in` file is changed, the corresponding pickle file will be recreated.

It is a good idea to create the pickle files in advance on your server to avoid re-creating the grammar state-action table for each experiments (~30s).


## Deprecated
### Different parsers
There are 3 parsers in total, each with their own input grammar file.
- lark:
  - LALR: The fastest parser, but has large load times. To generate the module and input file, run `evariste.syntax.export_grammar_lalr`
  - Earley: Slow. Called when LALR fails. To generate the module and input file, run `evariste.syntax.export_grammar_earley`
- cpp: Since the lark-Earley parser was slow, we re-coded a simple earley parser in cpp. It only requires an input file, that can be generated by running `evariste.syntax.earley.export_grammar` then move the input file to `syntax/earley/grammar_{grammar_name}.in`.